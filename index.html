<!DOCTYPE html>
<html>
<head>
<title>AquaTag</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}
body{background:#f2f9ff}

/* NAV */
nav{
background:white;
padding:15px 50px;
display:flex;
justify-content:space-between;
align-items:center;
box-shadow:0 2px 10px rgba(0,0,0,.05)
}

.btn{
background:#03045e;
color:white;
padding:8px 18px;
border-radius:20px;
cursor:pointer
}

/* HERO */
.hero{
height:300px;
background:linear-gradient(135deg,#6b6fd6,#9ee7f5);
display:flex;
align-items:center;
justify-content:center;
color:white;
font-size:36px;
font-weight:700
}

/* SECTIONS */
.section{
padding:60px;
text-align:center
}

.cards{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:20px;
margin-top:30px
}

.card{
background:white;
padding:25px;
border-radius:15px;
box-shadow:0 0 15px rgba(0,0,0,.05)
}

/* PAGES */
.page{display:none}

/* MODALS */
.modal{
display:none;
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(0,0,0,.6)
}

.box{
background:white;
width:350px;
margin:120px auto;
padding:25px;
border-radius:12px;
text-align:center
}

input{
width:100%;
padding:10px;
margin:8px 0
}

button{
width:100%;
padding:10px;
background:#03045e;
color:white;
border:none;
border-radius:6px;
margin-top:8px
}

.red{color:red;font-size:13px}
.green{color:green;font-size:13px}

.dashboard{
max-width:900px;
margin:40px auto
}

footer{
background:#03045e;
color:white;
text-align:center;
padding:25px
}
</style>
</head>

<body>

<nav>
<b>AquaTag</b>
<div class="btn" onclick="openLogin()">Customer Login</div>
</nav>

<!-- HOME -->
<div id="home" class="page">

<div class="hero">Your Brand. Our Water.</div>

<div class="section">
<h2>Why AquaTag?</h2>

<div class="cards">
<div class="card">Pure Quality</div>
<div class="card">Custom Branding</div>
<div class="card">Bulk Supply</div>
</div>
</div>

<div class="section">
<h2>Our Services</h2>
<div class="cards">
<div class="card">250ml / 500ml / 1L / 2L Bottles</div>
<div class="card">Custom Sticker Printing</div>
<div class="card">Office & Event Supply</div>
</div>
</div>

</div>

<!-- CUSTOMER DASHBOARD -->
<div id="dashboard" class="page dashboard">
<h2>Customer Dashboard</h2>
<p>Status: Approved ✅</p>
<button onclick="logout()">Logout</button>
</div>

<!-- PENDING -->
<div id="pending" class="page dashboard">
<h2>Your account is waiting for admin approval ⏳</h2>
<button onclick="logout()">Logout</button>
</div>

<!-- ADMIN -->
<div id="admin" class="page dashboard">
<h2>Admin Panel</h2>
<div id="users"></div>
<button onclick="logout()">Logout</button>
</div>

<footer>
AquaTag India — contact.aquatag@gmail.com — 9961835925
</footer>

<!-- LOGIN -->
<div id="loginModal" class="modal">
<div class="box">
<h3>Login</h3>
<input id="le" placeholder="Email">
<input id="lp" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p onclick="openSignup()" style="color:blue;cursor:pointer">Create Account</p>
<div id="loginErr" class="red"></div>
<button onclick="closeLogin()">Close</button>
</div>
</div>

<!-- SIGNUP -->
<div id="signupModal" class="modal">
<div class="box">
<h3>Create Account</h3>
<input id="se" placeholder="Email">
<input id="sp" type="password" placeholder="Password">
<button onclick="signup()">Register</button>
<div id="signupMsg" class="green"></div>
<div id="signupErr" class="red"></div>
<button onclick="closeSignup()">Close</button>
</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyDqhSH9crtmW5iEA-hsFudxHng4pZw860g",
 authDomain:"aquatag-ef3cd.firebaseapp.com",
 projectId:"aquatag-ef3cd"
});

const auth=firebase.auth();
const db=firebase.firestore();

const ADMIN_EMAIL="contact.aquatag@gmail.com";

function show(x){
document.querySelectorAll(".page").forEach(p=>p.style.display="none");
document.getElementById(x).style.display="block";
}

show("home");

/* UI */
function openLogin(){loginModal.style.display="block"}
function closeLogin(){loginModal.style.display="none"}
function openSignup(){closeLogin();signupModal.style.display="block"}
function closeSignup(){signupModal.style.display="none"}

/* SIGNUP */
function signup(){
signupErr.innerText="";
signupMsg.innerText="";

auth.createUserWithEmailAndPassword(se.value,sp.value).then(c=>{
db.collection("users").doc(c.user.uid).set({
email:se.value,
status:"pending"
});
signupMsg.innerText="Account created. Waiting for admin approval.";
});
}

/* LOGIN */
function login(){
loginErr.innerText="";

auth.signInWithEmailAndPassword(le.value,lp.value).then(c=>{
closeLogin();

if(c.user.email===ADMIN_EMAIL){
loadAdmin();
return;
}

db.collection("users").doc(c.user.uid).get().then(d=>{
if(d.data().status==="pending"){
show("pending");
}else{
show("dashboard");
}
});
}).catch(e=>loginErr.innerText=e.message);
}

/* ADMIN */
function loadAdmin(){
show("admin");
db.collection("users").onSnapshot(s=>{
users.innerHTML="";
s.forEach(d=>{
if(d.data().status==="pending"){
users.innerHTML+=`
<div class="card">
${d.data().email}
<button onclick="approve('${d.id}')">Approve</button>
</div>`;
}
});
});
}

function approve(id){
db.collection("users").doc(id).update({status:"approved"});
}

/* LOGOUT */
function logout(){
auth.signOut();
show("home");
}
</script>

</body>
</html>
