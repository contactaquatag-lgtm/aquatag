<!DOCTYPE html>
<html>
<body style="font-family:Arial;padding:40px">

<h2>My Orders</h2>

<input id="qty" placeholder="Bottle Quantity">
<button onclick="place()">Place Order</button>

<hr>

<div id="list"></div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyDqhSH9crtmW5iEA-hsFudxHng4pZw860g",
 authDomain:"aquatag-ef3cd.firebaseapp.com",
 projectId:"aquatag-ef3cd"
});

const auth=firebase.auth();
const db=firebase.firestore();

function place(){
auth.onAuthStateChanged(u=>{
if(!u){alert("Login again");return;}

let oid="AQ"+Date.now();

db.collection("orders").doc(oid).set({
orderId:oid,
uid:u.uid,
qty:qty.value,
status:"Pending",
created:new Date()
});

alert("Order "+oid+" placed");
});
}

auth.onAuthStateChanged(u=>{
db.collection("orders").where("uid","==",u.uid)
.onSnapshot(s=>{
list.innerHTML="";
s.forEach(d=>{
let o=d.data();
list.innerHTML+=`
<p>
<b>${o.orderId}</b> | Qty:${o.qty} | ${o.status}
</p>`;
});
});
});
</script>

</body>
</html>
