<!DOCTYPE html>
<html>
<head>
<title>AquaTag Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:Poppins;background:#f0faff}
.card{max-width:800px;margin:40px auto;background:white;padding:30px;border-radius:20px}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.box{background:#caf0f8;padding:10px;border-radius:10px;text-align:center}
input{width:100%;padding:8px;border-radius:8px;border:1px solid #ccc}
button{width:100%;margin-top:15px;background:#03045e;color:white;padding:12px;border:none;border-radius:10px;font-weight:700}
.badge{padding:4px 10px;border-radius:50px;font-size:12px}
.Pending{background:#fff3cd}
.Printing{background:#d1ecf1}
.Delivered{background:#d4edda}
</style>
</head>

<body>

<div class="card">

<h2>Place Order</h2>

<div class="grid">
<div class="box">250ml<input id="q250"></div>
<div class="box">500ml<input id="q500"></div>
<div class="box">1L<input id="q1"></div>
<div class="box">2L<input id="q2"></div>
</div>

<textarea id="address" placeholder="Delivery Address" style="width:100%;margin-top:10px"></textarea>

<button onclick="place()">Submit</button>

<hr>

<h3>My Orders</h3>
<div id="list"></div>

<button onclick="logout()">Logout</button>
 <button onclick="location.href='profile.html'">My Profile</button>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyDqhSH9crtmW5iEA-hsFudxHng4pZw860g",
 authDomain:"aquatag-ef3cd.firebaseapp.com",
 projectId:"aquatag-ef3cd"
});

const auth=firebase.auth();
const db=firebase.firestore();

function place(){
auth.onAuthStateChanged(u=>{
let id="AQ"+Date.now();
db.collection("orders").doc(id).set({
orderId:id,
uid:u.uid,
q250:q250.value,
q500:q500.value,
q1:q1.value,
q2:q2.value,
address:address.value,
status:"Pending"
});
alert("Order "+id+" placed");
});
}

auth.onAuthStateChanged(u=>{
db.collection("orders").where("uid","==",u.uid)
.onSnapshot(s=>{
list.innerHTML="";
s.forEach(d=>{
let o=d.data();
list.innerHTML+=`
<p>
<b>${o.orderId}</b>
 | 250:${o.q250} 500:${o.q500} 1L:${o.q1} 2L:${o.q2}
 <span class="badge ${o.status}">${o.status}</span>
</p>`;
});
});
});

function logout(){
auth.signOut();
location.href="dashboard.html";
}
</script>

</body>
</html>
